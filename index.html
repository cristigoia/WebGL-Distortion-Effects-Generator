<!DOCTYPE html>
<html lang="en" class="no-js">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>WebGL Distortion Effects Generator</title>
		<meta name="description" content="A configurator for creating unique fullscreen image animations with WebGL distortion effects powered by Three.js." />
		<meta name="keywords" content="configurator, animation, grid, fullscreen, liquid, effect, webgl, ripples, distortion, three.js" />
		<link rel="shortcut icon" href="favicon.ico">
		<link rel="stylesheet" type="text/css" href="css/base.css" />
	</head>
	<body class="loading cda-naked cda-noimg cda-removeleft  demo-5">
		<main>
		<div id="app"></div>
			<div class="content" id="items-wrap">
				<div class="item">
					<img class="content__img" src="img/1.jpg" alt="An image" />
					<img class="content__img content__img--large" src="img/1_large.jpg" alt="An image" />
				</div>
			</div>
		</main>
		<script src="js/imagesloaded.pkgd.min.js"></script>
		<script src="js/three.min.js"></script>
		<script src="js/TweenLite.min.js"></script>
		<script src="js/CSSPlugin.min.js"></script>
		<script src="js/EasePack.min.js"></script>
		<script src="js/dat-gui.min.js"></script>
		<script src="js/Configurator.js"></script>
		<script src="js/GridToFullscreenEffect.js"></script>
		<script src="js/basicDemo.js"></script>
		<script>
			const itemsWrapper = document.getElementById('items-wrap')
//            {
//				activation: { type: "side", props: {bottom: true} },
//				transformation: {
//					type: "wavy",
//					props: {
//						seed: "8000",
//						frequency: 1,
//						amplitude: 0.6
//					}
//				},
//				seed: 800,
//				duration: 2.,
//				easings: {
//					toFullscreen: Power3.easeOut,
//					toGrid: Power3.easeOut
//				}
//						
//			}
			const configurator = createDemoConfigurator({"activation":{"type":"radial","props":{"onMouse":true,"x":0,"y":0}},"transformation":{"type":"simplex","props":{"frequencyX":0.2,"frequencyY":0.2,"progressLimit":0.30000000000000004}},"duration":1.5,"randomizeSeed":"itemUnique","seed":8000})
		imagesLoaded(document.querySelectorAll("img"), instance => {

			//https://www.techrepublic.com/article/preloading-and-the-javascript-image-object/
			document.body.classList.remove("loading");
			let images = [];
				for (var i = 0, imageSet = {}; i < instance.elements.length; i++) {
					let image = {
						element: instance.elements[i],
						image: instance.images[i].isLoaded ? instance.images[i].img : null
					};
					if (i % 2 === 0) {
						imageSet = {};
						imageSet.small = image;
					}

					if (i % 2 === 1) {
						imageSet.large = image;
						images.push(imageSet);
					}
				}
				configurator.effect.createTextures(images);
			});
		
		</script>
</body>
</html>
